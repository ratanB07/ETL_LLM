<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GENFLOW - Data Drift Detection & Monitoring</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        :root {
            --primary: #4f46e5;
            --primary-dark: #4338ca;
            --primary-light: #6366f1;
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            --dark: #1e293b;
            --light: #f8fafc;
            --gray: #64748b;
            --gray-light: #e2e8f0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            background-color: #f8fafc;
            color: var(--dark);
        }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            background-color: black;
            border-radius: 8px;
            width: 36px;
            height: 36px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: var(--primary);
            font-size: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .logo-text {
            font-weight: 700;
            font-size: 22px;
            letter-spacing: 0.5px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .dashboard-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .dashboard-title i {
            font-size: 28px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--gray-light);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-title {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .stat-trend {
            display: flex;
            align-items: center;
            font-size: 13px;
            font-weight: 500;
        }

        .trend-up {
            color: var(--secondary);
        }

        .trend-down {
            color: var(--danger);
        }

        .trend-neutral {
            color: var(--gray);
        }

        .chart-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--gray-light);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .chart-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chart-wrapper {
            position: relative;
            height: 400px;
            width: 100%;
        }

        .drift-alerts {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--gray-light);
        }

        .alert-item {
            padding: 15px;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.2s ease;
        }

        .alert-item:last-child {
            border-bottom: none;
        }

        .alert-item:hover {
            background-color: #f8fafc;
        }

        .alert-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .alert-icon-critical {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        .alert-icon-warning {
            background-color: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .alert-icon-info {
            background-color: rgba(59, 130, 246, 0.1);
            color: var(--info);
        }

        .alert-content {
            flex-grow: 1;
        }

        .alert-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--dark);
        }

        .alert-message {
            font-size: 14px;
            color: var(--gray);
            line-height: 1.5;
        }

        .alert-time {
            font-size: 12px;
            color: var(--gray);
            white-space: nowrap;
            margin-left: 15px;
        }

        .data-table {
            width: 100%;
            overflow-x: auto;
            margin-bottom: 30px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--gray-light);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        th {
            background: var(--primary);
            color: white;
            padding: 12px 15px;
            text-align: left;
            font-weight: 500;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--gray-light);
        }

        tr:nth-child(even) {
            background-color: var(--light);
        }

        .drift-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .drift-high {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        .drift-medium {
            background-color: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .drift-low {
            background-color: rgba(59, 130, 246, 0.1);
            color: var(--info);
        }

        .drift-none {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--secondary);
        }

        .dashboard-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .button {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(79, 70, 229, 0.2);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(79, 70, 229, 0.3);
        }

        .button-secondary {
            background: white;
            color: var(--primary);
            border: 1px solid var(--gray-light);
            box-shadow: none;
        }

        .button-secondary:hover {
            background-color: #f1f5f9;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .button-danger {
            background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%);
        }

        .button-success {
            background: linear-gradient(135deg, var(--secondary) 0%, #059669 100%);
        }

        .button-warning {
            background: linear-gradient(135deg, var(--warning) 0%, #d97706 100%);
        }

        .real-time-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--secondary);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
        }

        .pulse-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--secondary);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .tab-container {
            display: flex;
            border-bottom: 1px solid var(--gray-light);
            margin-bottom: 20px;
        }

        .tab {
            padding: 12px 20px;
            cursor: pointer;
            font-weight: 500;
            color: var(--gray);
            border-bottom: 3px solid transparent;
            transition: all 0.2s ease;
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab:hover:not(.active) {
            color: var(--dark);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .llm-insight {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--gray-light);
        }

        .llm-insight-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .llm-insight-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .llm-insight-content {
            line-height: 1.6;
            color: var(--dark);
        }

        .llm-insight-content p {
            margin-bottom: 10px;
        }

        .llm-insight-content ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .llm-insight-content li {
            margin-bottom: 5px;
        }

        .severity-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .severity-high {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        .severity-medium {
            background-color: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .severity-low {
            background-color: rgba(59, 130, 246, 0.1);
            color: var(--info);
        }

        .severity-info {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--secondary);
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">
            <div class="logo-icon">G</div>
            <div class="logo-text">GENFLOW</div>
        </div>
        <div style="display: flex; align-items: center; gap: 15px;">
            <div class="real-time-indicator">
                <div class="pulse-dot"></div>
                <span>Real-time Monitoring</span>
            </div>
            <div style="background-color: rgba(255, 255, 255, 0.1); padding: 6px 12px; border-radius: 20px; font-size: 14px;">
                <i class="fas fa-clock"></i> Last updated: <span id="lastUpdated">Just now</span>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="dashboard-title">
            <i class="fas fa-wave-square"></i>
            Data Drift Detection & Monitoring
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-title">
                    <i class="fas fa-exclamation-triangle"></i>
                    Total Drift Alerts
                </div>
                <div class="stat-value" id="totalAlerts">14</div>
                <div class="stat-trend trend-up">
                    <i class="fas fa-arrow-up"></i> 3 new since last hour
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-title">
                    <i class="fas fa-columns"></i>
                    Columns with Drift
                </div>
                <div class="stat-value" id="columnsWithDrift">8</div>
                <div class="stat-trend trend-up">
                    <i class="fas fa-arrow-up"></i> 2 new since last hour
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-title">
                    <i class="fas fa-bolt"></i>
                    Highest Drift Score
                </div>
                <div class="stat-value" id="highestDrift">0.87</div>
                <div class="stat-trend trend-neutral">
                    <i class="fas fa-equals"></i> No change
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-title">
                    <i class="fas fa-shield-alt"></i>
                    Data Quality Score
                </div>
                <div class="stat-value" id="qualityScore">82%</div>
                <div class="stat-trend trend-down">
                    <i class="fas fa-arrow-down"></i> 5% decrease
                </div>
            </div>
        </div>

        <div class="tab-container">
            <div class="tab active" onclick="switchTab('overview')">Overview</div>
            <div class="tab" onclick="switchTab('detailed')">Detailed Analysis</div>
            <div class="tab" onclick="switchTab('llm')">LLM Insights</div>
            <div class="tab" onclick="switchTab('history')">Drift History</div>
        </div>

        <div class="tab-content active" id="overview-tab">
            <div class="chart-container">
                <div class="chart-header">
                    <div class="chart-title">
                        <i class="fas fa-chart-line"></i>
                        Data Drift Over Time
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <select class="button button-secondary" style="padding: 6px 12px;">
                            <option>Last 24 hours</option>
                            <option>Last 7 days</option>
                            <option>Last 30 days</option>
                        </select>
                    </div>
                </div>
                <div class="chart-wrapper">
                    <canvas id="driftOverTimeChart"></canvas>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                <div class="chart-container">
                    <div class="chart-header">
                        <div class="chart-title">
                            <i class="fas fa-fire"></i>
                            Highest Drift Columns
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <div id="topDriftColumnsChart" style="height: 100%;"></div>
                    </div>
                </div>

                <div class="drift-alerts">
                    <div class="chart-header">
                        <div class="chart-title">
                            <i class="fas fa-bell"></i>
                            Recent Drift Alerts
                        </div>
                    </div>
                    <div class="alert-item">
                        <div class="alert-icon alert-icon-critical">
                            <i class="fas fa-exclamation"></i>
                        </div>
                        <div class="alert-content">
                            <div class="alert-title">Critical Drift Detected</div>
                            <div class="alert-message">
                                Column "purchase_amount" shows significant statistical drift (KS score: 0.87) compared to baseline.
                            </div>
                        </div>
                        <div class="alert-time">2 min ago</div>
                    </div>
                    <div class="alert-item">
                        <div class="alert-icon alert-icon-warning">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="alert-content">
                            <div class="alert-title">Concept Drift Warning</div>
                            <div class="alert-message">
                                Relationship between "age" and "purchase_amount" has changed significantly (Drift score: 0.65).
                            </div>
                        </div>
                        <div class="alert-time">15 min ago</div>
                    </div>
                    <div class="alert-item">
                        <div class="alert-icon alert-icon-warning">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="alert-content">
                            <div class="alert-title">Distribution Shift</div>
                            <div class="alert-message">
                                Categorical column "product_category" shows new categories not present in training data.
                            </div>
                        </div>
                        <div class="alert-time">32 min ago</div>
                    </div>
                    <div class="alert-item">
                        <div class="alert-icon alert-icon-info">
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <div class="alert-content">
                            <div class="alert-title">Seasonal Pattern Detected</div>
                            <div class="alert-message">
                                Column "daily_visits" shows expected seasonal variation (Confirmed by LLM analysis).
                            </div>
                        </div>
                        <div class="alert-time">1 hour ago</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="detailed-tab">
            <div class="chart-container">
                <div class="chart-header">
                    <div class="chart-title">
                        <i class="fas fa-search"></i>
                        Detailed Drift Analysis by Column
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <select class="button button-secondary" style="padding: 6px 12px;" id="columnSelect">
                            <option value="purchase_amount">purchase_amount</option>
                            <option value="age">age</option>
                            <option value="product_category">product_category</option>
                            <option value="customer_region">customer_region</option>
                            <option value="session_duration">session_duration</option>
                        </select>
                    </div>
                </div>
                <div class="chart-wrapper">
                    <div id="detailedDriftChart" style="height: 100%;"></div>
                </div>
            </div>

            <div class="data-table">
                <table>
                    <thead>
                        <tr>
                            <th>Column Name</th>
                            <th>Data Type</th>
                            <th>Drift Score</th>
                            <th>Drift Type</th>
                            <th>Status</th>
                            <th>Last Checked</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>purchase_amount</td>
                            <td>Numeric</td>
                            <td>0.87</td>
                            <td>Distribution Shift</td>
                            <td><span class="drift-badge drift-high">High Drift</span></td>
                            <td>2 min ago</td>
                        </tr>
                        <tr>
                            <td>age</td>
                            <td>Numeric</td>
                            <td>0.65</td>
                            <td>Concept Drift</td>
                            <td><span class="drift-badge drift-medium">Medium Drift</span></td>
                            <td>15 min ago</td>
                        </tr>
                        <tr>
                            <td>product_category</td>
                            <td>Categorical</td>
                            <td>0.42</td>
                            <td>New Categories</td>
                            <td><span class="drift-badge drift-medium">Medium Drift</span></td>
                            <td>32 min ago</td>
                        </tr>
                        <tr>
                            <td>customer_region</td>
                            <td>Categorical</td>
                            <td>0.18</td>
                            <td>Frequency Change</td>
                            <td><span class="drift-badge drift-low">Low Drift</span></td>
                            <td>45 min ago</td>
                        </tr>
                        <tr>
                            <td>session_duration</td>
                            <td>Numeric</td>
                            <td>0.05</td>
                            <td>No Significant Drift</td>
                            <td><span class="drift-badge drift-none">Stable</span></td>
                            <td>1 hour ago</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="tab-content" id="llm-tab">
            <div class="llm-insight">
                <div class="llm-insight-header">
                    <div class="llm-insight-title">
                        <i class="fas fa-robot"></i>
                        LLM Analysis Summary
                    </div>
                    <div>
                        <span class="severity-indicator severity-high">
                            <i class="fas fa-exclamation-circle"></i> Critical Insight
                        </span>
                    </div>
                </div>
                <div class="llm-insight-content">
                    <p>The LLM has detected significant data drift patterns that require immediate attention:</p>
                    <ul>
                        <li><strong>Purchase Amount Shift:</strong> The distribution of purchase amounts has shifted significantly to higher values (KS test p-value &lt; 0.001). This could indicate changing customer behavior or possible data quality issues.</li>
                        <li><strong>New Customer Segments:</strong> The age distribution shows an influx of younger customers (18-25) not well represented in the training data.</li>
                        <li><strong>Emerging Product Categories:</strong> Three new product categories ("Smart Home", "Eco-Friendly", "Premium Subscriptions") account for 12% of recent transactions.</li>
                    </ul>
                    <p><strong>Recommended Actions:</strong></p>
                    <ol>
                        <li>Retrain models with updated data to account for new customer segments</li>
                        <li>Investigate possible data pipeline issues causing the purchase amount shift</li>
                        <li>Consider creating separate models for the new product categories</li>
                    </ol>
                </div>
            </div>

            <div class="llm-insight">
                <div class="llm-insight-header">
                    <div class="llm-insight-title">
                        <i class="fas fa-chart-pie"></i>
                        Distribution Analysis
                    </div>
                    <div>
                        <span class="severity-indicator severity-medium">
                            <i class="fas fa-exclamation-triangle"></i> Warning
                        </span>
                    </div>
                </div>
                <div class="llm-insight-content">
                    <p>The LLM's distribution analysis reveals:</p>
                    <ul>
                        <li>The relationship between age and purchase amount has weakened (correlation dropped from 0.45 to 0.32). Younger customers are making larger purchases than historical patterns would predict.</li>
                        <li>Weekend purchase patterns have shifted, with Saturday now accounting for 28% of weekly sales (up from 22%).</li>
                        <li>The "Electronics" category shows a bimodal distribution in purchase amounts that wasn't present in training data.</li>
                    </ul>
                </div>
            </div>

            <div class="llm-insight">
                <div class="llm-insight-header">
                    <div class="llm-insight-title">
                        <i class="fas fa-calendar-check"></i>
                        Temporal Patterns
                    </div>
                    <div>
                        <span class="severity-indicator severity-info">
                            <i class="fas fa-info-circle"></i> Informational
                        </span>
                    </div>
                </div>
                <div class="llm-insight-content">
                    <p>The LLM has identified several temporal patterns:</p>
                    <ul>
                        <li>The observed increase in purchase amounts is concentrated between 2-5 PM local time, suggesting a change in customer behavior during these hours.</li>
                        <li>Daily visit counts show expected seasonal variation and are within predicted bounds.</li>
                        <li>New customer signups show a weekly pattern with peaks on Tuesdays (contrary to the historical Thursday peak).</li>
                    </ul>
                    <p>These patterns appear to represent genuine business changes rather than data quality issues.</p>
                </div>
            </div>
        </div>

        <div class="tab-content" id="history-tab">
            <div class="chart-container">
                <div class="chart-header">
                    <div class="chart-title">
                        <i class="fas fa-history"></i>
                        Drift History Timeline
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <select class="button button-secondary" style="padding: 6px 12px;">
                            <option>Last 7 days</option>
                            <option>Last 30 days</option>
                            <option>Last 90 days</option>
                        </select>
                    </div>
                </div>
                <div class="chart-wrapper">
                    <div id="driftHistoryChart" style="height: 100%;"></div>
                </div>
            </div>

            <div class="data-table">
                <table>
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>Column</th>
                            <th>Drift Score</th>
                            <th>Drift Type</th>
                            <th>Status</th>
                            <th>Action Taken</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Today, 10:45 AM</td>
                            <td>purchase_amount</td>
                            <td>0.87</td>
                            <td>Distribution Shift</td>
                            <td><span class="drift-badge drift-high">High Drift</span></td>
                            <td>Alert sent to data team</td>
                        </tr>
                        <tr>
                            <td>Today, 10:30 AM</td>
                            <td>age</td>
                            <td>0.65</td>
                            <td>Concept Drift</td>
                            <td><span class="drift-badge drift-medium">Medium Drift</span></td>
                            <td>Monitoring</td>
                        </tr>
                        <tr>
                            <td>Today, 10:15 AM</td>
                            <td>product_category</td>
                            <td>0.42</td>
                            <td>New Categories</td>
                            <td><span class="drift-badge drift-medium">Medium Drift</span></td>
                            <td>Categories added to reference</td>
                        </tr>
                        <tr>
                            <td>Yesterday, 3:20 PM</td>
                            <td>customer_region</td>
                            <td>0.18</td>
                            <td>Frequency Change</td>
                            <td><span class="drift-badge drift-low">Low Drift</span></td>
                            <td>No action needed</td>
                        </tr>
                        <tr>
                            <td>Yesterday, 10:15 AM</td>
                            <td>session_duration</td>
                            <td>0.05</td>
                            <td>No Significant Drift</td>
                            <td><span class="drift-badge drift-none">Stable</span></td>
                            <td>No action needed</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="dashboard-actions">
            <button class="button button-secondary">
                <i class="fas fa-cog"></i> Configure Alerts
            </button>
            <button class="button button-success">
                <i class="fas fa-sync-alt"></i> Refresh Analysis
            </button>
            <button class="button">
                <i class="fas fa-file-export"></i> Export Report
            </button>
        </div>
    </div>

    <script>
        // Initialize charts
        function initializeCharts() {
            // Drift Over Time Chart
            const driftOverTimeCtx = document.getElementById('driftOverTimeChart').getContext('2d');
            const driftOverTimeChart = new Chart(driftOverTimeCtx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 24}, (_, i) => `${i}:00`),
                    datasets: [
                        {
                            label: 'Drift Score',
                            data: [0.2, 0.22, 0.25, 0.23, 0.21, 0.24, 0.3, 0.35, 0.4, 0.45, 0.5, 0.55, 
                                   0.6, 0.65, 0.7, 0.72, 0.75, 0.78, 0.8, 0.82, 0.85, 0.86, 0.87, 0.87],
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Alert Threshold',
                            data: Array(24).fill(0.7),
                            borderColor: '#f59e0b',
                            borderWidth: 1,
                            borderDash: [5, 5],
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 1.0,
                            title: {
                                display: true,
                                text: 'Drift Score'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Time (Last 24 hours)'
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw.toFixed(2)}`;
                                }
                            }
                        },
                        annotation: {
                            annotations: {
                                line1: {
                                    type: 'line',
                                    yMin: 0.7,
                                    yMax: 0.7,
                                    borderColor: '#f59e0b',
                                    borderWidth: 1,
                                    borderDash: [5, 5],
                                    label: {
                                        content: 'Alert Threshold',
                                        enabled: true,
                                        position: 'right'
                                    }
                                }
                            }
                        }
                    }
                }
            });

            // Top Drift Columns Chart (using ECharts)
            const topDriftColumnsChart = echarts.init(document.getElementById('topDriftColumnsChart'));
            topDriftColumnsChart.setOption({
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'value',
                    axisLabel: {
                        formatter: '{value}'
                    }
                },
                yAxis: {
                    type: 'category',
                    data: ['purchase_amount', 'age', 'product_category', 'customer_region', 'session_duration'],
                    axisLabel: {
                        interval: 0
                    }
                },
                series: [
                    {
                        name: 'Drift Score',
                        type: 'bar',
                        data: [
                            {
                                value: 0.87,
                                itemStyle: {
                                    color: '#ef4444'
                                }
                            },
                            {
                                value: 0.65,
                                itemStyle: {
                                    color: '#f59e0b'
                                }
                            },
                            {
                                value: 0.42,
                                itemStyle: {
                                    color: '#f59e0b'
                                }
                            },
                            {
                                value: 0.18,
                                itemStyle: {
                                    color: '#3b82f6'
                                }
                            },
                            {
                                value: 0.05,
                                itemStyle: {
                                    color: '#10b981'
                                }
                            }
                        ],
                        label: {
                            show: true,
                            position: 'right',
                            formatter: function(params) {
                                return params.value.toFixed(2);
                            }
                        }
                    }
                ]
            });

            // Detailed Drift Chart (using ECharts)
            const detailedDriftChart = echarts.init(document.getElementById('detailedDriftChart'));
            updateDetailedDriftChart('purchase_amount');

            // Drift History Chart (using ECharts)
            const driftHistoryChart = echarts.init(document.getElementById('driftHistoryChart'));
            driftHistoryChart.setOption({
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross',
                        label: {
                            backgroundColor: '#6a7985'
                        }
                    }
                },
                legend: {
                    data: ['purchase_amount', 'age', 'product_category', 'customer_region', 'session_duration']
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
                },
                yAxis: {
                    type: 'value',
                    max: 1.0
                },
                series: [
                    {
                        name: 'purchase_amount',
                        type: 'line',
                        stack: 'Total',
                        smooth: true,
                        lineStyle: {
                            width: 0
                        },
                        showSymbol: false,
                        areaStyle: {
                            opacity: 0.8,
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                {
                                    offset: 0,
                                    color: 'rgba(239, 68, 68, 0.8)'
                                },
                                {
                                    offset: 1,
                                    color: 'rgba(239, 68, 68, 0.1)'
                                }
                            ])
                        },
                        emphasis: {
                            focus: 'series'
                        },
                        data: [0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.87]
                    },
                    {
                        name: 'age',
                        type: 'line',
                        stack: 'Total',
                        smooth: true,
                        lineStyle: {
                            width: 0
                        },
                        showSymbol: false,
                        areaStyle: {
                            opacity: 0.8,
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                {
                                    offset: 0,
                                    color: 'rgba(245, 158, 11, 0.8)'
                                },
                                {
                                    offset: 1,
                                    color: 'rgba(245, 158, 11, 0.1)'
                                }
                            ])
                        },
                        emphasis: {
                            focus: 'series'
                        },
                        data: [0.1, 0.2, 0.25, 0.3, 0.4, 0.5, 0.65]
                    },
                    {
                        name: 'product_category',
                        type: 'line',
                        stack: 'Total',
                        smooth: true,
                        lineStyle: {
                            width: 0
                        },
                        showSymbol: false,
                        areaStyle: {
                            opacity: 0.8,
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                {
                                    offset: 0,
                                    color: 'rgba(245, 158, 11, 0.8)'
                                },
                                {
                                    offset: 1,
                                    color: 'rgba(245, 158, 11, 0.1)'
                                }
                            ])
                        },
                        emphasis: {
                            focus: 'series'
                        },
                        data: [0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.42]
                    },
                    {
                        name: 'customer_region',
                        type: 'line',
                        stack: 'Total',
                        smooth: true,
                        lineStyle: {
                            width: 0
                        },
                        showSymbol: false,
                        areaStyle: {
                            opacity: 0.8,
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                {
                                    offset: 0,
                                    color: 'rgba(59, 130, 246, 0.8)'
                                },
                                {
                                    offset: 1,
                                    color: 'rgba(59, 130, 246, 0.1)'
                                }
                            ])
                        },
                        emphasis: {
                            focus: 'series'
                        },
                        data: [0.05, 0.08, 0.1, 0.12, 0.15, 0.16, 0.18]
                    },
                    {
                        name: 'session_duration',
                        type: 'line',
                        stack: 'Total',
                        smooth: true,
                        lineStyle: {
                            width: 0
                        },
                        showSymbol: false,
                        areaStyle: {
                            opacity: 0.8,
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                {
                                    offset: 0,
                                    color: 'rgba(16, 185, 129, 0.8)'
                                },
                                {
                                    offset: 1,
                                    color: 'rgba(16, 185, 129, 0.1)'
                                }
                            ])
                        },
                        emphasis: {
                            focus: 'series'
                        },
                        data: [0.02, 0.03, 0.04, 0.05, 0.05, 0.05, 0.05]
                    }
                ]
            });

            // Handle window resize
            window.addEventListener('resize', function() {
                topDriftColumnsChart.resize();
                detailedDriftChart.resize();
                driftHistoryChart.resize();
            });

            // Column select change handler
            document.getElementById('columnSelect').addEventListener('change', function() {
                updateDetailedDriftChart(this.value);
            });
        }

        function updateDetailedDriftChart(column) {
            const detailedDriftChart = echarts.getInstanceByDom(document.getElementById('detailedDriftChart'));
            
            // Sample data for different columns
            const columnData = {
                'purchase_amount': {
                    title: 'Purchase Amount Distribution Drift',
                    baseline: [120, 132, 101, 134, 90, 230, 210, 150, 120, 145, 180, 150],
                    current: [80, 92, 91, 94, 130, 230, 310, 250, 220, 245, 280, 250],
                    driftScore: 0.87,
                    driftType: 'Distribution Shift'
                },
                'age': {
                    title: 'Age Distribution Drift',
                    baseline: [220, 182, 191, 234, 290, 330, 310, 201, 154, 190, 330, 410],
                    current: [320, 232, 201, 334, 390, 330, 320, 301, 254, 290, 330, 310],
                    driftScore: 0.65,
                    driftType: 'Concept Drift'
                },
                'product_category': {
                    title: 'Product Category Frequency Drift',
                    baseline: [120, 132, 101, 134, 90, 230, 210],
                    current: [120, 142, 131, 144, 160, 230, 210],
                    driftScore: 0.42,
                    driftType: 'New Categories'
                },
                'customer_region': {
                    title: 'Customer Region Frequency Drift',
                    baseline: [220, 182, 191, 234, 290, 230, 210],
                    current: [220, 202, 211, 224, 270, 230, 210],
                    driftScore: 0.18,
                    driftType: 'Frequency Change'
                },
                'session_duration': {
                    title: 'Session Duration Distribution Drift',
                    baseline: [120, 132, 101, 134, 90, 230, 210],
                    current: [125, 137, 106, 139, 95, 235, 215],
                    driftScore: 0.05,
                    driftType: 'No Significant Drift'
                }
            };

            const data = columnData[column];
            const color = data.driftScore > 0.7 ? '#ef4444' : 
                         data.driftScore > 0.4 ? '#f59e0b' : 
                         data.driftScore > 0.1 ? '#3b82f6' : '#10b981';

            detailedDriftChart.setOption({
                title: {
                    text: data.title,
                    subtext: `Drift Score: ${data.driftScore.toFixed(2)} (${data.driftType})`,
                    left: 'center',
                    textStyle: {
                        fontSize: 16,
                        fontWeight: 'bold'
                    },
                    subtextStyle: {
                        color: color,
                        fontSize: 14
                    }
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                legend: {
                    data: ['Baseline Distribution', 'Current Distribution'],
                    top: 40
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    top: 80,
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'].slice(0, data.baseline.length)
                },
                yAxis: {
                    type: 'value'
                },
                series: [
                    {
                        name: 'Baseline Distribution',
                        type: 'bar',
                        data: data.baseline,
                        itemStyle: {
                            color: '#64748b'
                        },
                        emphasis: {
                            focus: 'series'
                        }
                    },
                    {
                        name: 'Current Distribution',
                        type: 'bar',
                        data: data.current,
                        itemStyle: {
                            color: color
                        },
                        emphasis: {
                            focus: 'series'
                        }
                    }
                ]
            });
        }

        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });

            // Deactivate all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Activate selected tab
            document.querySelector(`.tab[onclick="switchTab('${tabName}')"]`).classList.add('active');
            
            // Show selected tab content
            document.getElementById(`${tabName}-tab`).classList.add('active');

            // Resize charts if needed
            setTimeout(() => {
                const charts = [
                    echarts.getInstanceByDom(document.getElementById('topDriftColumnsChart')),
                    echarts.getInstanceByDom(document.getElementById('detailedDriftChart')),
                    echarts.getInstanceByDom(document.getElementById('driftHistoryChart'))
                ];
                
                charts.forEach(chart => {
                    if (chart) chart.resize();
                });
            }, 100);
        }

        // Simulate real-time updates
        function simulateRealTimeUpdates() {
            let minutes = 0;
            
            setInterval(() => {
                minutes++;
                const now = new Date();
                document.getElementById('lastUpdated').textContent = `Today, ${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
                
                // Randomly update some stats
                if (minutes % 5 === 0) {
                    const totalAlerts = document.getElementById('totalAlerts');
                    totalAlerts.textContent = parseInt(totalAlerts.textContent) + 1;
                    
                    const columnsWithDrift = document.getElementById('columnsWithDrift');
                    if (Math.random() > 0.7) {
                        columnsWithDrift.textContent = parseInt(columnsWithDrift.textContent) + 1;
                    }
                }
            }, 60000); // Update every minute
        }

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
            simulateRealTimeUpdates();
            
            // Load data from sessionStorage if available
            const driftData = JSON.parse(sessionStorage.getItem('driftData'));
            if (driftData) {
                // Update UI with drift data
                document.getElementById('totalAlerts').textContent = driftData.alerts.length;
                document.getElementById('columnsWithDrift').textContent = driftData.columnsWithDrift;
                document.getElementById('highestDrift').textContent = driftData.highestDrift.toFixed(2);
                document.getElementById('qualityScore').textContent = `${Math.round(driftData.qualityScore * 100)}%`;
            }
        });
    </script>
</body>
</html>